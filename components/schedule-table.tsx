"use client"

import { useState } from "react"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { Badge } from "@/components/ui/badge"

const classes = [
  "5А",
  "5Б",
  "5В",
  "6А",
  "6Б",
  "6В",
  "7А",
  "7Б",
  "7В",
  "8А",
  "8Б",
  "8В",
  "9А",
  "9Б",
  "9В",
  "10А",
  "10Б",
  "10В",
  "11А",
  "11Б",
  "11В",
]

const days = ["Понедельник", "Вторник", "Среда", "Четверг", "Пятница"]

const timeSlots = [
  "9:00-9:45",
  "9:50-10:35",
  "10:40-11:25",
  "11:35-12:20",
  "12:25-13:10",
  "13:15-14:00",
  "14:10-14:55",
]

// Примерное расписание для разных классов
const scheduleData: Record<string, Record<string, string[]>> = {
  "5А": {
    Понедельник: ["Математика", "Русский язык", "Литература", "Физкультура", "Английский язык", "-", "-"],
    Вторник: ["Английский язык", "Математика", "История", "Биология", "Музыка", "-", "-"],
    Среда: ["Русский язык", "Литература", "Математика", "География", "ИЗО", "-", "-"],
    Четверг: ["Математика", "Английский язык", "Русский язык", "Физкультура", "Технология", "-", "-"],
    Пятница: ["История", "Математика", "Биология", "Русский язык", "Литература", "-", "-"],
  },
  "6А": {
    Понедельник: ["Математика", "Русский язык", "Английский язык", "История", "Физкультура", "-", "-"],
    Вторник: ["Биология", "Математика", "Литература", "География", "Музыка", "-", "-"],
    Среда: ["Русский язык", "Математика", "Английский язык", "Обществознание", "ИЗО", "-", "-"],
    Четверг: ["Математика", "Физкультура", "Русский язык", "История", "Технология", "-", "-"],
    Пятница: ["Английский язык", "Литература", "Математика", "Биология", "География", "-", "-"],
  },
  "7А": {
    Понедельник: ["Алгебра", "Русский язык", "Английский язык", "Физика", "Физкультура", "История", "-"],
    Вторник: ["Геометрия", "Литература", "Биология", "География", "Информатика", "Музыка", "-"],
    Среда: ["Русский язык", "Алгебра", "Английский язык", "История", "Обществознание", "ИЗО", "-"],
    Четверг: ["Физика", "Геометрия", "Русский язык", "Физкультура", "Биология", "Технология", "-"],
    Пятница: ["Английский язык", "Литература", "Алгебра", "География", "История", "Информатика", "-"],
  },
  "8А": {
    Понедельник: ["Алгебра", "Русский язык", "Химия", "Английский язык", "Физкультура", "История", "-"],
    Вторник: ["Геометрия", "Физика", "Литература", "Биология", "География", "ОБЖ", "-"],
    Среда: ["Русский язык", "Алгебра", "Английский язык", "Информатика", "Обществознание", "Химия", "-"],
    Четверг: ["Физика", "Геометрия", "Русский язык", "Физкультура", "История", "Технология", "-"],
    Пятница: ["Английский язык", "Литература", "Алгебра", "Биология", "География", "Химия", "-"],
  },
  "9А": {
    Понедельник: ["Алгебра", "Русский язык", "Химия", "Физика", "Английский язык", "Физкультура", "История"],
    Вторник: ["Геометрия", "Литература", "Биология", "География", "Информатика", "Обществознание", "-"],
    Среда: ["Русский язык", "Алгебра", "Английский язык", "Химия", "История", "Физика", "-"],
    Четверг: ["Геометрия", "Физкультура", "Русский язык", "Биология", "Литература", "ОБЖ", "-"],
    Пятница: ["Английский язык", "Алгебра", "Физика", "География", "История", "Обществознание", "-"],
  },
  "10А": {
    Понедельник: ["Алгебра", "Русский язык", "Физика", "Химия", "Английский язык", "История", "Обществознание"],
    Вторник: ["Геометрия", "Литература", "Биология", "География", "Информатика", "Физкультура", "-"],
    Среда: ["Русский язык", "Алгебра", "Английский язык", "Физика", "Химия", "История", "-"],
    Четверг: ["Геометрия", "Биология", "Русский язык", "Физкультура", "Литература", "Обществознание", "-"],
    Пятница: ["Английский язык", "Алгебра", "Физика", "География", "История", "ОБЖ", "Информатика"],
  },
  "11А": {
    Понедельник: ["Алгебра", "Русский язык", "Физика", "Химия", "Английский язык", "История", "Обществознание"],
    Вторник: ["Геометрия", "Литература", "Биология", "Информатика", "География", "Физкультура", "-"],
    Среда: ["Русский язык", "Алгебра", "Английский язык", "Физика", "История", "Обществознание", "-"],
    Четверг: ["Геометрия", "Химия", "Русский язык", "Биология", "Литература", "Физкультура", "-"],
    Пятница: ["Английский язык", "Алгебра", "Физика", "История", "География", "ОБЖ", "Астрономия"],
  },
}

// Создаем расписание для остальных классов на основе базового
classes.forEach((className) => {
  if (!scheduleData[className]) {
    const baseClass = className.charAt(0) + "А"
    scheduleData[className] = { ...scheduleData[baseClass] }
  }
})

export function ScheduleTable() {
  const [selectedClass, setSelectedClass] = useState("5А")

  const grades = [
    { label: "5 класс", classes: ["5А", "5Б", "5В"] },
    { label: "6 класс", classes: ["6А", "6Б", "6В"] },
    { label: "7 класс", classes: ["7А", "7Б", "7В"] },
    { label: "8 класс", classes: ["8А", "8Б", "8В"] },
    { label: "9 класс", classes: ["9А", "9Б", "9В"] },
    { label: "10 класс", classes: ["10А", "10Б", "10В"] },
    { label: "11 класс", classes: ["11А", "11Б", "11В"] },
  ]

  return (
    <div className="space-y-6">
      <Tabs defaultValue="5" className="w-full">
        <TabsList className="grid w-full grid-cols-7 mb-8">
          {grades.map((grade, index) => (
            <TabsTrigger key={index} value={String(5 + index)}>
              {grade.label}
            </TabsTrigger>
          ))}
        </TabsList>

        {grades.map((grade, gradeIndex) => (
          <TabsContent key={gradeIndex} value={String(5 + gradeIndex)}>
            <div className="mb-6">
              <div className="flex flex-wrap gap-2">
                {grade.classes.map((className) => (
                  <Badge
                    key={className}
                    variant={selectedClass === className ? "default" : "outline"}
                    className="cursor-pointer px-4 py-2"
                    onClick={() => setSelectedClass(className)}
                  >
                    {className}
                  </Badge>
                ))}
              </div>
            </div>

            <Card>
              <CardHeader>
                <CardTitle className="text-2xl">Расписание для класса {selectedClass}</CardTitle>
              </CardHeader>
              <CardContent>
                <div className="overflow-x-auto">
                  <table className="w-full border-collapse">
                    <thead>
                      <tr className="border-b border-border">
                        <th className="text-left p-3 font-bold text-sm bg-muted/50">Время</th>
                        {days.map((day) => (
                          <th key={day} className="text-center p-3 font-bold text-sm bg-muted/50">
                            {day}
                          </th>
                        ))}
                      </tr>
                    </thead>
                    <tbody>
                      {timeSlots.map((time, timeIndex) => (
                        <tr key={timeIndex} className="border-b border-border hover:bg-muted/30 transition-colors">
                          <td className="p-3 text-sm font-medium text-muted-foreground whitespace-nowrap">{time}</td>
                          {days.map((day) => {
                            const lesson = scheduleData[selectedClass]?.[day]?.[timeIndex] || "-"
                            return (
                              <td key={day} className="p-3 text-center">
                                {lesson !== "-" ? (
                                  <div className="inline-block px-3 py-2 rounded-md bg-primary/10 text-foreground text-sm font-medium">
                                    {lesson}
                                  </div>
                                ) : (
                                  <span className="text-muted-foreground text-sm">—</span>
                                )}
                              </td>
                            )
                          })}
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </CardContent>
            </Card>
          </TabsContent>
        ))}
      </Tabs>
    </div>
  )
}
